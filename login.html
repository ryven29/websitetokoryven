<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Kedai Kyt@</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <img src="image/logo.png" alt="Logo Kripik Usus Kyt@" class="logo">
                    <div class="brand-info">
                        <h1>Kedai Kyt@</h1>
                        <p class="tagline">Rasa Nikmat, Harga Berkualitas</p>
                    </div>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="index.html#home" class="nav-link">Home</a></li>
                        <li><a href="index.html#produk" class="nav-link">Produk</a></li>
                        <li><a href="testimoni.html" class="nav-link">Testimoni</a></li>
                        <li><a href="index.html#hubungi" class="nav-link">Hubungi Kami</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="container" style="min-height: 60vh; display: flex; align-items: center; justify-content: center;">
        <div style="max-width: 420px; width: 100%; background: #fff; padding: 24px; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.08); text-align: center;">
            <h2 style="margin-bottom: 8px;">Masuk untuk Lanjut</h2>
            <p style="margin-top: 0; margin-bottom: 20px; color: #555;">Silakan login menggunakan akun Google Anda.</p>

            <div id="g_id_onload"
                data-client_id="590640737195-7pfe0h9djaofhshvnj3bsg417bfi2lc4.apps.googleusercontent.com"
                data-context="signin"
                data-ux_mode="popup"
                data-callback="onGoogleSignIn"
                data-auto_prompt="false">
            </div>
            <div id="googleSignInBtn" class="g_id_signin" data-type="standard" data-shape="rectangular" data-theme="outline" data-text="signin_with" data-size="large" data-logo_alignment="left"></div>

            <p style="margin-top: 16px; font-size: 12px; color: #777;">Kami hanya menggunakan nama dan email Anda untuk menampilkan identitas pada testimoni. Email akan disensor.</p>
        </div>
    </main>

    <!-- Footer -->
    <footer id="hubungi">
        <div class="container">
            <h3>Kedai Kyt@</h3>
            <div class="footer-content">
                <div class="footer-section">
                    <h4>üìû Kontak Pemilik</h4>
                    <p>üì± WhatsApp: 0856-5480-5329</p>
                    <p>üìñ Facebook: Lisa Aar</p>
                    <p>üëú Shopee: Kedaikyta</p>
                </div>
                <div class="footer-section">
                    <h4>üìç Alamat Toko</h4>
                    <p>Jl. Anggrek</p>
                    <p>Desa Panggung, Kecamatan Panggung</p>
                    <p>Kabupaten Tanah Laut, Kalimantan Selatan</p>
                    <p>Kode Pos: 70815</p>
                </div>
                <div class="footer-section">
                    <h4>üåê Sosial Media</h4>
                    <div class="social-links">
                        <a href="https://wa.me/6285654805329" target="_blank" class="whatsapp-link" title="WhatsApp">
                            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                                <circle cx="20" cy="20" r="20" fill="#25D366"/>
                                <path d="M28.5 11.4C26.9 9.8 24.8 8.8 22.5 8.3C20.2 7.8 17.8 8 15.7 8.9C13.6 9.8 11.9 11.3 10.8 13.2C9.7 15.1 9.3 17.3 9.6 19.5C9.9 21.7 11 23.7 12.6 25.2L9 31L15 27.5C16.8 28.6 18.9 29.2 21 29.2C23.7 29.2 26.3 28.1 28.2 26.2C30.1 24.3 31.2 21.7 31.2 19C31.2 16.3 30.1 13.7 28.5 11.4ZM25.9 23.5C25.7 24.1 24.6 24.6 24.1 24.7C23.6 24.8 23.1 24.9 21.9 24.4C21.2 24.1 20.3 23.8 19.3 23.2C16.8 21.9 15.2 19.3 15.1 19.1C14.9 18.9 13.6 17.2 13.6 15.5C13.6 13.8 14.5 12.9 14.8 12.6C15.1 12.3 15.4 12.2 15.6 12.2C15.8 12.2 16 12.2 16.2 12.2C16.4 12.2 16.6 12.2 16.8 12.7C17 13.2 17.5 14.9 17.6 15C17.7 15.1 17.7 15.2 17.6 15.4C17.5 15.6 17.4 15.7 17.3 15.9C17.2 16.1 17 16.3 16.9 16.4C16.7 16.6 16.6 16.8 16.7 17C16.8 17.2 17.4 18.2 18.3 19C19.5 20.1 20.5 20.4 20.8 20.6C21.1 20.8 21.2 20.7 21.4 20.5C21.6 20.3 22.1 19.7 22.3 19.4C22.5 19.1 22.7 19.2 23 19.3C23.3 19.4 24.9 20.2 25.2 20.4C25.5 20.6 25.7 20.7 25.8 20.8C25.9 21 25.9 21.5 25.7 22.1Z" fill="white"/>
                            </svg>
                        </a>
                        <a href="https://web.facebook.com/profile.php?id=61578310350627" target="_blank" class="facebook-link" title="Instagram">
                            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                                <circle cx="20" cy="20" r="20" fill="#1877F2"/>
                                <path d="M25.5 12.5H22.5C21.12 12.5 19.5 13.12 19.5 15.5V17.5H16.5V21H19.5V27.5H23V21H26L26.5 17.5H23V15.5C23 14.67 23.67 14 24.5 14H25.5V12.5Z" fill="white"/>
                            </svg>
                        </a>
                        <a href="https://shopee.co.id/kedaikyta" target="_blank" class="shopee-link" title="Shopee">
                            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                                <circle cx="20" cy="20" r="20" fill="#EE4D2D"/>
                                <path d="M20 11C15.03 11 11 15.03 11 20C11 24.97 15.03 29 20 29C24.97 29 29 24.97 29 20C29 15.03 24.97 11 20 11ZM23.5 24.5H16.5C16.22 24.5 16 24.28 16 24V20.5C16 20.22 16.22 20 16.5 20H17.5V18C17.5 16.62 18.62 15.5 20 15.5C21.38 15.5 22.5 16.62 22.5 18V20H23.5C23.78 20 24 20.22 24 20.5V24C24 24.28 23.78 24.5 23.5 24.5ZM21.5 18C21.5 17.17 20.83 16.5 20 16.5C19.17 16.5 18.5 17.17 18.5 18V20H21.5V18Z" fill="white"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            <p class="copyright">&copy; 2025 Kripik Usus Kyt@. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        function parseJwt(token) {
            const parts = token.split('.');
            if (parts.length !== 3) return null;
            const payload = parts[1]
                .replace(/-/g, '+')
                .replace(/_/g, '/');
            const decoded = atob(payload);
            try {
                return JSON.parse(decodeURIComponent(decoded.split('').map(function(c) {
                    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
                }).join('')));
            } catch (e) {
                try {
                    return JSON.parse(decoded);
                } catch (e2) {
                    return null;
                }
            }
        }

        function onGoogleSignIn(response) {
            const payload = parseJwt(response.credential);
            if (!payload) {
                alert('Gagal memproses login Google.');
                return;
            }
            const user = {
                name: payload.name || payload.given_name || '',
                email: payload.email || '',
                picture: payload.picture || ''
            };
            localStorage.setItem('authUser', JSON.stringify(user));
            const next = sessionStorage.getItem('nextAfterLogin') || 'testimoni.html';
            sessionStorage.removeItem('nextAfterLogin');
            window.location.href = next;
        }

        // If already logged in, redirect to next or testimoni
        document.addEventListener('DOMContentLoaded', function() {
            const params = new URLSearchParams(window.location.search);
            const nextParam = params.get('next');
            if (nextParam) {
                sessionStorage.setItem('nextAfterLogin', nextParam);
            }
            const existing = localStorage.getItem('authUser');
            if (existing) {
                const next = sessionStorage.getItem('nextAfterLogin') || 'testimoni.html';
                sessionStorage.removeItem('nextAfterLogin');
                window.location.href = next;
            }
        });
    </script>
</body>
</html>


