<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kedai Kyt@</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <img src="image/logo.png" alt="Logo Kripik Usus Kyt@" class="logo">
                    <div class="brand-info">
                        <h1>Kedai Kyt@</h1>
                        <p class="tagline">Rasa Nikmat, Harga Berkualitas</p>
                    </div>
                </div>
                <nav class="main-nav">
                    <ul>
                        <li><a href="#home" class="nav-link active">Home</a></li>
                        <li><a href="#produk" class="nav-link">Produk</a></li>
                        <li><a href="html/testimoni.html" class="nav-link">Testimoni</a></li>
                        <li><a href="#hubungi" class="nav-link">Hubungi Kami</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="container">
            <div class="hero-content">
                <!-- Photo Slider (Left) -->
                <div class="hero-photos">
                    <div class="slider-container">
                        <div class="slide active">
                            <img src="image/Slides/IMG-20251019-WA0012.jpg" alt="Kripik Usus Original">
                        </div>
                        <div class="slide">
                            <img src="image/Slides/IMG-20251019-WA0030.jpg" alt="Kripik Usus Varian 8">
                        </div>
                        <div class="slide">
                            <img src="image/Slides/IMG-20251019-WA0013.jpg" alt="Kripik Usus Varian 9">
                        </div>
                        <div class="slide">
                            <img src="image/Slides/id-11134207-7rask-m5s6w9fbp69ydc@resize_w900_nl.webp" alt="Kripik Usus Varian 10">
                        </div>
                        <div class="slide">
                            <img src="image/Slides/id-11134207-7rasj-m5s6w9fbxlom25@resize_w900_nl.webp" alt="Kripik Usus Pedas Cabe-cabean">
                        </div>
                        <div class="slide">
                            <img src="image/Slides/id-11134207-7rbk1-m6bzre57t8cic1.webp" alt="Kripik Usus Pedas Daun Jeruk">
                        </div>
                        <div class="slide">
                            <img src="image/Slides/id-11134207-7rbk3-m6bzrdw29fo84c.webp" alt="Kripik Usus Asin Daun Jeruk">
                        </div>
                        <div class="slide">
                            <img src="image/Slides/id-11134207-7rbk6-m6bzrdw2dndkc3.webp" alt="Kripik Usus Varian 1">
                        </div>
                        <div class="slide">
                            <img src="image/Slides/id-11134207-7rbk7-m6bzrdw2813s57.webp" alt="Kripik Usus Varian 2">
                        </div>
                        <div class="slide">
                            <img src="image/Slides/id-11134207-7rbk7-m6bzrdw2f1y0b3.webp" alt="Kripik Usus Varian 3">
                        </div>
                        <div class="slide">
                            <img src="image/Slides/id-11134207-7rbk8-m6bzrdw26mo056.webp" alt="Kripik Usus Varian 4">
                        </div>
                        <div class="slide">
                            <img src="image/Slides/id-11134207-7rbk9-m6bzrdw26mkz0f.webp" alt="Kripik Usus Varian 5">
                        </div>
                        <div class="slide">
                            <img src="image/Slides/id-11134207-7rbkc-m6bzrdw26mjc2c.webp" alt="Kripik Usus Varian 6">
                        </div>
                        <div class="slide">
                            <img src="image/Slides/id-11134207-7rbkd-m6bzrdw2au8o9e.webp" alt="Kripik Usus Varian 7">
                        </div>
                        <button class="slider-btn prev" onclick="changeSlide(-1)">‚ùÆ</button>
                        <button class="slider-btn next" onclick="changeSlide(1)">‚ùØ</button>
                    </div>
                    <div class="slider-dots" id="hero-dots">
                        <!-- Dots will be generated by JavaScript -->
                    </div>
                </div>

                <!-- Description (Right) -->
                <div class="hero-description">
                    <div class="description-content">
                        <h2>Selamat Datang di Kedai Kyt@ üëã</h2>
                        <p class="description-text">
                            Kedai Kyta adalah tempat terbaik untuk menemukan jajanan lezat dan berkualitas tinggi.
                            Kami menyediakan berbagai macam produk, salah satunya dalam memproduksi kripik usus berkualitas tinggi dengan berbagai varian rasa 
                            yang menggugah selera. Setiap gigitan memberikan sensasi renyah yang memuaskan dan rasa yang autentik.
                        </p>
                        <div class="features">
                            <div class="feature-item">
                                <span class="feature-icon"><img src="image/emoji.png" alt="emoji" class="emoji-icon"></span>
                                <span>Kripik Usus Renyah & Gurih</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">üå∂Ô∏è</span>
                                <span>4 Varian Rasa Lezat</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">üöö</span>
                                <span>Pengiriman Cepat</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">‚≠ê</span>
                                <span>Kualitas Terjamin</span>
                            </div>
                        </div>
                        <div class="cta-buttons">
                            <button class="cta-primary" onclick="document.getElementById('produk').scrollIntoView({behavior: 'smooth'})">
                                Lihat Produk
                            </button>
                            <a href="https://wa.me/6285654805329" target="_blank" class="cta-whatsapp">
                                <span>üì±</span> Pesan via WhatsApp
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Keranjang Button -->
    <div class="cart-float" onclick="toggleCart()">
        üõí <span id="cart-count">0</span>
    </div>

    <!-- Main Content -->
    <main class="container">
        <!-- Kripik Usus -->
        <section id="produk" class="recommended-section">
            <div class="recommended-content">
                <!-- Left Section: Title and Description -->
                <div class="recommended-info">
                    <h2 class="recommended-title">KRIPIK USUS KYT@</h2>
                    <p class="recommended-description">
                        Diproduksi menggunakan bahan-bahan alami dan rempah-rempah pilihan yang dicampurkan secara proporsional, menghasilkan cita rasa yang gurih dan lezat. Ideal sebagai pelengkap hidangan nasi hangat maupun sebagai camilan.
                    </p>
                </div>
                
                <!-- Right Section: Product Cards -->
                <div class="recommended-products">
                    <div class="products-container" id="products-container">
                        <!-- Product cards will be generated by JavaScript -->
                    </div>
                    <div class="product-nav-arrows">
                        <button class="product-nav-btn prev-products" onclick="changeProductSlide(-1)">‚ùÆ</button>
                        <button class="product-nav-btn next-products" onclick="changeProductSlide(1)">‚ùØ</button>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Product Options Modal -->
    <div id="product-options-modal" class="modal">
        <div class="options-modal-content">
            <span class="close-options" onclick="closeProductOptions()">&times;</span>
            <h2 class="options-title">PILIH OPSI</h2>
            
            <div class="options-product-info">
                <div class="options-product-image">
                    <div class="options-product-slider" id="options-product-slider">
                        <!-- Images will be generated by JavaScript -->
                    </div>
                </div>
                <div class="options-product-details">
                    <h3 id="options-product-name">Kripik Usus Original</h3>
                    <p class="options-product-price" id="options-product-price">Rp 5.000</p>
                </div>
            </div>
            
            <div class="options-section">
                <label class="options-label">Berat</label>
                <div class="options-buttons" id="size-options">
                    <button class="option-btn active" data-weight="50" data-price="5000">50 gr</button>
                    <button class="option-btn" data-weight="100" data-price="10000">100 gr</button>
                    <button class="option-btn" data-weight="250" data-price="25000">250 gr</button>
                    <button class="option-btn" data-weight="500" data-price="50000">500 gr</button>
                    <button class="option-btn" data-weight="1000" data-price="90000">1 kg</button>
                </div>
            </div>
            
            <div class="options-footer">
                <div class="options-quantity">
                    <button class="qty-btn-options" onclick="changeOptionsQuantity(-1)">-</button>
                    <input type="number" id="options-quantity-input" value="1" min="1">
                    <button class="qty-btn-options" onclick="changeOptionsQuantity(1)">+</button>
                </div>
                <div class="options-actions">
                    <button class="add-to-cart-options-btn" onclick="addToCartFromOptions()">
                        Masukkan ke keranjang
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="toggleCart()">&times;</span>
            <h2>üõí Keranjang Belanja</h2>
            <div id="cart-items"></div>
            <div class="cart-total">
                <h3>Total: <span id="total-price">Rp 0</span></h3>
            </div>
            <button class="checkout-btn" onclick="checkout()">Pesan via WhatsApp</button>
        </div>
    </div>

    <!-- Footer -->
    <footer id="hubungi">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>üìû Kontak Pemilik</h4>
                    <p>üì± WhatsApp: 0856-5480-5329</p>
                    <p>üìñ Facebook: Lisa Aar</p>
                    <p>üëú Shopee: Kedaikyta</p>
                </div>
                <div class="footer-section">
                    <h4>üìç Alamat Toko</h4>
                    <p>Jl. Anggrek</p>
                    <p>Desa Panggung, Kecamatan Panggung</p>
                    <p>Kabupaten Tanah Laut, Kalimantan Selatan</p>
                    <p>Kode Pos: 70815</p>
                </div>
                <div class="footer-section">
                    <h4>üåê Sosial Media</h4>
            <div class="social-links">
                        <a href="https://wa.me/6285654805329" target="_blank" class="whatsapp-link" title="WhatsApp">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                        <circle cx="20" cy="20" r="20" fill="#25D366"/>
                        <path d="M28.5 11.4C26.9 9.8 24.8 8.8 22.5 8.3C20.2 7.8 17.8 8 15.7 8.9C13.6 9.8 11.9 11.3 10.8 13.2C9.7 15.1 9.3 17.3 9.6 19.5C9.9 21.7 11 23.7 12.6 25.2L9 31L15 27.5C16.8 28.6 18.9 29.2 21 29.2C23.7 29.2 26.3 28.1 28.2 26.2C30.1 24.3 31.2 21.7 31.2 19C31.2 16.3 30.1 13.7 28.5 11.4ZM25.9 23.5C25.7 24.1 24.6 24.6 24.1 24.7C23.6 24.8 23.1 24.9 21.9 24.4C21.2 24.1 20.3 23.8 19.3 23.2C16.8 21.9 15.2 19.3 15.1 19.1C14.9 18.9 13.6 17.2 13.6 15.5C13.6 13.8 14.5 12.9 14.8 12.6C15.1 12.3 15.4 12.2 15.6 12.2C15.8 12.2 16 12.2 16.2 12.2C16.4 12.2 16.6 12.2 16.8 12.7C17 13.2 17.5 14.9 17.6 15C17.7 15.1 17.7 15.2 17.6 15.4C17.5 15.6 17.4 15.7 17.3 15.9C17.2 16.1 17 16.3 16.9 16.4C16.7 16.6 16.6 16.8 16.7 17C16.8 17.2 17.4 18.2 18.3 19C19.5 20.1 20.5 20.4 20.8 20.6C21.1 20.8 21.2 20.7 21.4 20.5C21.6 20.3 22.1 19.7 22.3 19.4C22.5 19.1 22.7 19.2 23 19.3C23.3 19.4 24.9 20.2 25.2 20.4C25.5 20.6 25.7 20.7 25.8 20.8C25.9 21 25.9 21.5 25.7 22.1Z" fill="white"/>
                    </svg>
                </a>
                        <a href="https://web.facebook.com/profile.php?id=61578310350627" target="_blank" class="facebook-link" title="Instagram">
                            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                                <circle cx="20" cy="20" r="20" fill="#1877F2"/>
                                 <path d="M25.5 12.5H22.5C21.12 12.5 19.5 13.12 19.5 15.5V17.5H16.5V21H19.5V27.5H23V21H26L26.5 17.5H23V15.5C23 14.67 23.67 14 24.5 14H25.5V12.5Z" fill="white"/>
                            </svg>
                        </a>
                        <a href="https://shopee.co.id/kedaikyta" target="_blank" class="shopee-link" title="Shopee">
                            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                                <circle cx="20" cy="20" r="20" fill="#EE4D2D"/>
                                <path d="M20 11C15.03 11 11 15.03 11 20C11 24.97 15.03 29 20 29C24.97 29 29 24.97 29 20C29 15.03 24.97 11 20 11ZM23.5 24.5H16.5C16.22 24.5 16 24.28 16 24V20.5C16 20.22 16.22 20 16.5 20H17.5V18C17.5 16.62 18.62 15.5 20 15.5C21.38 15.5 22.5 16.62 22.5 18V20H23.5C23.78 20 24 20.22 24 20.5V24C24 24.28 23.78 24.5 23.5 24.5ZM21.5 18C21.5 17.17 20.83 16.5 20 16.5C19.17 16.5 18.5 17.17 18.5 18V20H21.5V18Z" fill="white"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            <p class="copyright">&copy; 2025 Kedai Kyt@. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currentSlide = 0;
        let categorySliders = {};

        // Slider Functions
        function changeSlide(n) {
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.dot');
            
            slides[currentSlide].classList.remove('active');
            dots[currentSlide].classList.remove('active');
            
            currentSlide += n;
            if (currentSlide >= slides.length) currentSlide = 0;
            if (currentSlide < 0) currentSlide = slides.length - 1;
            
            slides[currentSlide].classList.add('active');
            dots[currentSlide].classList.add('active');
        }

        function goToSlide(n) {
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.dot');
            
            slides[currentSlide].classList.remove('active');
            dots[currentSlide].classList.remove('active');
            
            currentSlide = n;
            
            slides[currentSlide].classList.add('active');
            dots[currentSlide].classList.add('active');
        }

        // Initialize all sliders
        function initializeSliders() {
            // Hero slider
            const heroSlides = document.querySelectorAll('.slide');
            const heroDots = document.getElementById('hero-dots');
            
            // Generate dots for hero slider
            if (heroDots) {
                heroDots.innerHTML = '';
                for (let i = 0; i < heroSlides.length; i++) {
                    const dot = document.createElement('span');
                    dot.className = i === 0 ? 'dot active' : 'dot';
                    dot.onclick = () => goToSlide(i);
                    heroDots.appendChild(dot);
                }
            }
            
            // Category sliders
            const categorySliders = document.querySelectorAll('.category-slider');
            categorySliders.forEach((slider, index) => {
                const slides = slider.querySelectorAll('.category-slide');
                if (slides.length > 1) {
                    window[`categorySlide${index}`] = 0;
                    
                    // Auto slide for category sliders
                    setInterval(() => {
                        const currentSlide = window[`categorySlide${index}`];
                        slides[currentSlide].classList.remove('active');
                        window[`categorySlide${index}`] = (currentSlide + 1) % slides.length;
                        slides[window[`categorySlide${index}`]].classList.add('active');
                    }, 3000);
                }
            });
        }

        // Auto slide for hero
        setInterval(() => changeSlide(1), 4000);

        // Cart Functions

        // Mapping flavor to their image paths
        const flavorImages = {
            'original': ['image/Kripik Usus/Original/or1.webp', 'image/Kripik Usus/Original/or2.webp'],
            'pedas-cabe': ['image/Kripik Usus/Pedas Cabe-Cabean/pcc1.webp', 'image/Kripik Usus/Pedas Cabe-Cabean/pcc2.webp', 'image/Kripik Usus/Pedas Cabe-Cabean/pcc3.webp'],
            'pedas-daun-jeruk': ['image/Kripik Usus/Pedas Daun jeruk/pdj1.webp', 'image/Kripik Usus/Pedas Daun jeruk/pdj2.webp'],
            'asin-daun-jeruk': ['image/Kripik Usus/Asin Daun Jeruk/adj1.webp', 'image/Kripik Usus/Asin Daun Jeruk/adj2.webp']
        };

        // Product slider variables
        let productCurrentSlide = 0;
        let productSlideInterval;

        // Initialize product slider
        function initializeProductSlider(flavor) {
            const slider = document.querySelector('.product-slider');
            const dots = document.querySelector('.product-dots');
            const images = flavorImages[flavor];
            
            // Clear existing content
            slider.innerHTML = '';
            dots.innerHTML = '';
            
            // Add slides
            images.forEach((image, index) => {
                const slide = document.createElement('div');
                slide.className = `product-slide ${index === 0 ? 'active' : ''}`;
                slide.innerHTML = `<img src="${image}" alt="Kripik Usus ${flavorNames[flavor]}">`;
                slider.appendChild(slide);
                
                // Add dot
                const dot = document.createElement('span');
                dot.className = `product-dot ${index === 0 ? 'active' : ''}`;
                dot.onclick = () => goToProductSlide(index);
                dots.appendChild(dot);
            });
            
            // Reset slide position
            productCurrentSlide = 0;
            
            // Clear existing interval and start new one if multiple images
            if (productSlideInterval) clearInterval(productSlideInterval);
            if (images.length > 1) {
                productSlideInterval = setInterval(() => changeProductSlide(1), 3000);
            }
        }

        function changeProductSlide(n) {
            const slides = document.querySelectorAll('.product-slide');
            const dots = document.querySelectorAll('.product-dot');
            
            if (!slides.length) return;
            
            slides[productCurrentSlide].classList.remove('active');
            dots[productCurrentSlide].classList.remove('active');
            
            productCurrentSlide = (productCurrentSlide + n + slides.length) % slides.length;
            
            slides[productCurrentSlide].classList.add('active');
            dots[productCurrentSlide].classList.add('active');
        }

        function goToProductSlide(n) {
            const slides = document.querySelectorAll('.product-slide');
            const dots = document.querySelectorAll('.product-dot');
            
            if (!slides.length) return;
            
            slides[productCurrentSlide].classList.remove('active');
            dots[productCurrentSlide].classList.remove('active');
            
            productCurrentSlide = n;
            
            slides[productCurrentSlide].classList.add('active');
            dots[productCurrentSlide].classList.add('active');
        }

        // Cart Functions
        function addToCart(name, price, qty = 1) {
            const existingItem = cart.find(item => item.name === name);

            if (existingItem) {
                existingItem.quantity += qty;
            } else {
                cart.push({ name, price, quantity: qty });
            }

            updateCart();
            showNotification('Produk ditambahkan ke keranjang!');

            // Tambahkan animasi pada tombol keranjang
            const cartFloat = document.querySelector('.cart-float');
            cartFloat.style.transform = 'scale(1.2)';
            setTimeout(() => {
                cartFloat.style.transform = 'scale(1)';
            }, 200);
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCart();
        }

        function updateQuantity(index, change) {
            cart[index].quantity += change;
            if (cart[index].quantity <= 0) {
                removeFromCart(index);
            } else {
                updateCart();
            }
        }

        function updateCart() {
            // Simpan ke localStorage
            localStorage.setItem('cart', JSON.stringify(cart));
            
            const cartCount = document.getElementById('cart-count');
            const cartItems = document.getElementById('cart-items');
            const totalPrice = document.getElementById('total-price');
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="empty-cart">Keranjang masih kosong</p>';
            } else {
                cartItems.innerHTML = cart.map((item, index) => `
                    <div class="cart-item">
                        <div class="cart-item-info">
                            <h4>${item.name}</h4>
                            <p>Rp ${item.price.toLocaleString('id-ID')}</p>
                        </div>
                        <div class="cart-item-controls">
                            <button onclick="updateQuantity(${index}, -1)">-</button>
                            <span>${item.quantity}</span>
                            <button onclick="updateQuantity(${index}, 1)">+</button>
                            <button class="remove-btn" onclick="removeFromCart(${index})">üóëÔ∏è</button>
                        </div>
                    </div>
                `).join('');
            }
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            totalPrice.textContent = `Rp ${total.toLocaleString('id-ID')}`;
        }

        function toggleCart() {
            const modal = document.getElementById('cart-modal');
            modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
        }

        function checkout() {
            if (cart.length === 0) {
                alert('Keranjang masih kosong!');
                return;
            }
            
            let message = 'Halo, saya ingin memesan:\n\n';
            let total = 0;
            
            cart.forEach(item => {
                message += `${item.name} x${item.quantity} = Rp ${(item.price * item.quantity).toLocaleString('id-ID')}\n`;
                total += item.price * item.quantity;
            });
            
            message += `\nTotal: Rp ${total.toLocaleString('id-ID')}`;
            
            const whatsappUrl = `https://wa.me/6285654805329?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // Quantity controls for product page
        function changeQuantity(delta) {
            const input = document.getElementById('quantity-input');
            if (!input) return;
            let v = parseInt(input.value) || 1;
            v += delta;
            if (v < 1) v = 1;
            input.value = v;
        }

        // Product Data
        const products = [
            {
                id: 'original',
                name: 'Kripik Usus Original',
                displayName: 'Original',
                price: 5000,
                images: ['image/Kripik Usus/Original/or1.webp', 'image/Kripik Usus/Original/or2.webp']
            },
            {
                id: 'pedas-cabe',
                name: 'Kripik Usus Pedas Cabe-cabean',
                displayName: 'Pedas Cabe-cabean',
                price: 5000,
                images: ['image/Kripik Usus/Pedas Cabe-Cabean/pcc1.webp', 'image/Kripik Usus/Pedas Cabe-Cabean/pcc2.webp', 'image/Kripik Usus/Pedas Cabe-Cabean/pcc3.webp']
            },
            {
                id: 'pedas-daun-jeruk',
                name: 'Kripik Usus Pedas Daun Jeruk',
                displayName: 'Pedas Daun Jeruk',
                price: 5000,
                images: ['image/Kripik Usus/Pedas Daun jeruk/pdj1.webp', 'image/Kripik Usus/Pedas Daun jeruk/pdj2.webp']
            },
            {
                id: 'asin-daun-jeruk',
                name: 'Kripik Usus Asin Daun Jeruk',
                displayName: 'Asin Daun Jeruk',
                price: 5000,
                images: ['image/Kripik Usus/Asin Daun Jeruk/adj1.webp', 'image/Kripik Usus/Asin Daun Jeruk/adj2.webp']
            }
        ];

        const weightOptions = [
            { weight: 50, price: 5000, label: '50 gr' },
            { weight: 100, price: 10000, label: '100 gr' },
            { weight: 250, price: 25000, label: '250 gr' },
            { weight: 500, price: 50000, label: '500 gr' },
            { weight: 1000, price: 90000, label: '1 kg' }
        ];

        // Product slider variables for product cards
        let productCardSliders = {};
        let currentProductCardIndex = 0;
        let productsDisplayed = 3; // Number of products to show at once

        // Generate product cards
        function generateProductCards() {
            const container = document.getElementById('products-container');
            if (!container) return;

            container.innerHTML = '';

            products.forEach((product, index) => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.dataset.productId = product.id;

                const hasMultipleImages = product.images.length > 1;
                
                card.innerHTML = `
                    <div class="product-card-image">
                        <div class="product-card-slider" id="slider-${product.id}">
                            ${product.images.map((img, imgIndex) => `
                                <div class="product-card-slide ${imgIndex === 0 ? 'active' : ''}" style="opacity: ${imgIndex === 0 ? '1' : '0'}">
                                    <img src="${img}" alt="${product.name}" onerror="this.src='image/Kripik Usus/IMG-20251019-WA0012.jpg'">
                                </div>
                            `).join('')}
                        </div>
                        ${hasMultipleImages ? '<div class="product-card-dots" id="dots-'+product.id+'"></div>' : ''}
                    </div>
                    <div class="product-card-info">
                        <h3 class="product-card-name">${product.displayName}</h3>
                        <p class="product-card-price">Dari Rp ${product.price.toLocaleString('id-ID')}</p>
                        <button class="product-card-btn" onclick="openProductOptions('${product.id}')">Pilih opsi</button>
                    </div>
                `;

                container.appendChild(card);

                // Initialize autoslide if multiple images after a small delay
                if (hasMultipleImages) {
                    setTimeout(() => {
                        initializeProductCardSlider(product.id, product.images.length);
                    }, 100 * index);
                }
            });

            // Hide navigation arrows if all products fit
            setTimeout(() => {
                const cards = container.querySelectorAll('.product-card');
                if (cards.length <= productsDisplayed) {
                    document.querySelectorAll('.product-nav-btn').forEach(btn => {
                        btn.style.display = 'none';
                    });
                }
            }, 100);
        }

        // Initialize product card slider with fade animation
        function initializeProductCardSlider(productId, imageCount) {
            let currentIndex = 0;
            const slides = document.querySelectorAll(`#slider-${productId} .product-card-slide`);
            
            if (!slides.length || imageCount < 2) return;

            productCardSliders[productId] = setInterval(() => {
                // Fade out current
                slides[currentIndex].style.opacity = '0';
                
                setTimeout(() => {
                    slides[currentIndex].classList.remove('active');
                    currentIndex = (currentIndex + 1) % imageCount;
                    
                    // Fade in next
                    slides[currentIndex].classList.add('active');
                    setTimeout(() => {
                        slides[currentIndex].style.opacity = '1';
                    }, 50);
                }, 300);
            }, 3000);
        }

        // Product options modal
        let currentSelectedProduct = null;
        let currentSelectedWeight = 50;
        let currentSelectedPrice = 5000;

        function openProductOptions(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            currentSelectedProduct = product;
            currentSelectedWeight = 50;
            currentSelectedPrice = 5000;

            // Update modal content
            document.getElementById('options-product-name').textContent = product.name.toUpperCase();
            document.getElementById('options-product-price').textContent = `Rp ${currentSelectedPrice.toLocaleString('id-ID')}`;

            // Update product images in modal
            const slider = document.getElementById('options-product-slider');
            slider.innerHTML = '';
            
            product.images.forEach((img, index) => {
                const slide = document.createElement('div');
                slide.className = `options-product-slide ${index === 0 ? 'active' : ''}`;
                slide.style.opacity = index === 0 ? '1' : '0';
                slide.innerHTML = `<img src="${img}" alt="${product.name}">`;
                slider.appendChild(slide);
            });

            // Initialize modal slider if multiple images
            if (product.images.length > 1) {
                initializeOptionsProductSlider(product.images.length);
            }

            // Reset size selection
            document.querySelectorAll('#size-options .option-btn').forEach((btn, index) => {
                btn.classList.remove('active');
                if (index === 0) btn.classList.add('active');
            });

            // Show modal
            document.getElementById('product-options-modal').style.display = 'block';
        }

        function closeProductOptions() {
            document.getElementById('product-options-modal').style.display = 'none';
            
            // Clear slider intervals
            if (window.optionsProductSliderInterval) {
                clearInterval(window.optionsProductSliderInterval);
                window.optionsProductSliderInterval = null;
            }
        }

        function initializeOptionsProductSlider(imageCount) {
            if (window.optionsProductSliderInterval) {
                clearInterval(window.optionsProductSliderInterval);
            }

            let currentIndex = 0;
            const slides = document.querySelectorAll('#options-product-slider .options-product-slide');
            
            if (!slides.length || imageCount < 2) return;

            window.optionsProductSliderInterval = setInterval(() => {
                slides[currentIndex].style.opacity = '0';
                
                setTimeout(() => {
                    slides[currentIndex].classList.remove('active');
                    currentIndex = (currentIndex + 1) % imageCount;
                    
                    slides[currentIndex].classList.add('active');
                    setTimeout(() => {
                        slides[currentIndex].style.opacity = '1';
                    }, 50);
                }, 300);
            }, 3000);
        }

        // Size selection in options modal
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('option-btn')) {
                document.querySelectorAll('#size-options .option-btn').forEach(btn => btn.classList.remove('active'));
                e.target.classList.add('active');
                
                currentSelectedWeight = parseInt(e.target.dataset.weight);
                currentSelectedPrice = parseInt(e.target.dataset.price);
                
                document.getElementById('options-product-price').textContent = `Rp ${currentSelectedPrice.toLocaleString('id-ID')}`;
            }
        });

        function changeOptionsQuantity(delta) {
            const input = document.getElementById('options-quantity-input');
            if (!input) return;
            let v = parseInt(input.value) || 1;
            v += delta;
            if (v < 1) v = 1;
            input.value = v;
        }

        function addToCartFromOptions() {
            if (!currentSelectedProduct) return;

            const qtyInput = document.getElementById('options-quantity-input');
            const qty = qtyInput ? (parseInt(qtyInput.value) || 1) : 1;

            const weightLabel = weightOptions.find(w => w.weight === currentSelectedWeight)?.label || `${currentSelectedWeight}gr`;
            const productName = `${currentSelectedProduct.name} ${weightLabel}`;

            addToCart(productName, currentSelectedPrice, qty);
            closeProductOptions();
        }

        // Product carousel navigation
        function changeProductSlide(direction) {
            const container = document.getElementById('products-container');
            if (!container) return;

            const cards = container.querySelectorAll('.product-card');
            const totalCards = cards.length;
            
            if (totalCards <= productsDisplayed) {
                // Hide navigation arrows if all products are visible
                document.querySelectorAll('.product-nav-btn').forEach(btn => {
                    btn.style.display = 'none';
                });
                return;
            }

            // Show navigation arrows
            document.querySelectorAll('.product-nav-btn').forEach(btn => {
                btn.style.display = 'flex';
            });

            const maxIndex = Math.max(0, totalCards - productsDisplayed);

            currentProductCardIndex += direction;
            
            if (currentProductCardIndex < 0) currentProductCardIndex = 0;
            if (currentProductCardIndex > maxIndex) currentProductCardIndex = maxIndex;

            // Scroll to show the current set of products
            const cardWidth = cards[0] ? cards[0].offsetWidth + 20 : 0; // card width + gap
            container.scrollTo({
                left: currentProductCardIndex * cardWidth,
                behavior: 'smooth'
            });
        }

        // Smooth scrolling for internal hash links only
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                const href = this.getAttribute('href') || '';
                if (href.startsWith('#')) {
                    e.preventDefault();
                    const targetId = href.substring(1);
                    const targetElement = document.getElementById(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                    // Update active nav link
                    document.querySelectorAll('.nav-link').forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });

        // Initialize cart and product slider on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateCart();
            initializeSliders();
            generateProductCards();
        });

        // Close modal when clicking outside
        window.onclick = function(event) {
            const cartModal = document.getElementById('cart-modal');
            const optionsModal = document.getElementById('product-options-modal');
            if (event.target === cartModal) {
                cartModal.style.display = 'none';
            }
            if (event.target === optionsModal) {
                closeProductOptions();
            }
        }
    </script>
</body>
</html>